# Imager HASH(0x5652d88e5260)

Released 08 Dec 2004

- change the "double-include" protection macro that imio.h uses.
- updated download locations for the various libraries that Imager   depends on.  Added some advice for cygwin.
- more information on gif library versions in README and Makefile.PL
- creating an image where the size of the allocated image buffer would  overflow an integer would cause too small a buffer to be allocated.  This could potentially be a security hole.  partly resolves https://github.com/tonycoz/imager/isssues/8213
- set i_format to jpeg for jpeg files and test for it
- set i_format to png when reading png files and test for it
- i_yres was being set to the xres when reading a png file
- added many bad BMP files to test various code paths in bmp.c, and   made many minor fixes to bmp.c to make them work:
- it was possible for various types of read failures to SEGV, both  as NULL pointer dereferences and buffer overflows
- some errors, like palettes being too large for the number of bits  per pixel, were not being caught
- failing to read all of a packed data structure would not cause  a read failure
- invalid compression types were not always caught
- error messages are more consistent (still not always great messages,  but one step at a time)
- added bmp_compression_name, bmp_used_colors, bmp_filesize, bmp_bit_count   tags on reading a BMP file
- added tools/imager to the distribution.  This is still very   experimental and untested.  Patches welcome, if you write tests to go  with them.
- the BMP reader now validates the bfOffBits value from the BMP header  and skips to that offset before reading image data.  Previously this  value was read but otherwise ignored.
- added --palette action to tools/imager
- i_img_pal_new() now releases the image object memory if creation  fails.
- set i_format to gif when reading gif files and test for it
- set i_format to pnm when reading pnm files and test for it
- set i_format to tga when reading tga files and test for it
- handle image creation failures when reading tga files
- set i_format to tiff when reading tiff images and test for it
- handle image creation failures when reading tiff files
- test t/t35ttfont.t no longer requires TTFONTTEST to be set (and   hasn't for a long time,) removed that requirement from README
- updated home page URLs throughout the .pods
- added information on reporting bugs to the SUPPORT section of Imager.pm
- regops.perl now sorts the dumped data structure to produce minimal diffs
- quant.c now checks for integer overflow allocating its image data
- i_readraw_wiol() now checks for image creation failure
- i_readrgb_wiol() now checks for image creation failure
- i_writergb_wiol() was an empty stub, it now pushes an error message  and explicitly returns failure.
- i_readrgb_wiol() now sets i_format to rgb.
- set i_format to raw when reading tga files and test for it
- document i_format tag
- some tests were using $Config{ivsize} when they should have been   using $Config{intsize}  Resolves: https://github.com/tonycoz/imager/isssues/8645
- tools/imager has been removed from the MANIFEST, it's way too late  to test/debug for 0.44.
- image.h had no prototype for i_ft2_bbox_r() and it was being called  from Imager.xs
- giflib 4.1.3 still doesn't have all the bugs fixed, update the notes  in README and in the buggy_giflib.txt file that t105gif.t produces
- make the inclusion of NO_META dependent on the version of EU::MM.  I was going to include a META.yml but EU::MM's generation is too   simplistic (and misses the leading document header too).  For now  I'll leave it out.
- built 0.43_03 for testing